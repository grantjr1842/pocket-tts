# Compiler Diagnostics Cleaner

Python script to clean, deduplicate, and format compiler diagnostics from multiple languages (Rust, TypeScript, Python, etc.).

## Usage

### Default Format (Todo List)
```bash
# From file (default output: todo list)
python clean_diagnostics.py diagnostics.json

# From stdin
cat diagnostics.json | python clean_diagnostics.py
```

This outputs a markdown-formatted todo list like:

```markdown
# Todo List from Compiler Diagnostics
# Generated by clean_diagnostics.py

## File: rust-numpy/src/kernel_impls.rs
- [ ] Fix error[E0308] at rust-numpy/src/kernel_impls.rs:45 - mismatched types
- [ ] Fix error[E0599] at rust-numpy/src/kernel_impls.rs:79 - no method named `as_mut_ptr`

## File: rust-numpy/src/kernel_registry.rs
- [ ] Fix warning[unused_imports] at rust-numpy/src/kernel_registry.rs:10 - warning: unused import

# Summary: 2 errors, 1 warnings across 2 files
```

### Text Format (Traditional)
```bash
# Output in traditional text format
python clean_diagnostics.py --text diagnostics.json
```

### GitHub Issue Templates
```bash
# Output as GitHub issue templates
python clean_diagnostics.py --github diagnostics.json
```

This outputs GitHub issue templates that you can use with `gh issue create` or the web UI.

## Features

- ✅ **Multi-language support**: Works with Rust, TypeScript, Python, and other compiler/linter outputs
- ✅ **Deduplicates** diagnostics by file, error code, and line number
- ✅ **Cleans paths** to show relative paths from repo root
- ✅ **Groups by file** for easy navigation
- ✅ **Extracts summaries** from verbose compiler output
- ✅ **Counts** errors and warnings
- ✅ **Todo list format** (default) for direct task tracking
- ✅ **GitHub issue scaffolding** for creating issues directly from diagnostics

## Integration with Claude Code

When you have compiler diagnostics, you can now:

1. Run: `python clean_diagnostics.py diagnostics.json`
2. Copy the output todo list
3. Paste it directly into the conversation

Claude can then use the TodoWrite tool to track all the fixes needed!

## Creating GitHub Issues

To create GitHub issues from diagnostics:

```bash
# Generate issue templates
python clean_diagnostics.py --github diagnostics.json > issues.md

# Create issues using gh CLI (one at a time)
gh issue create --title "Error: mismatched types" --body-file <(sed -n '/^### Issue #1:/,/^### Issue #2:/p' issues.md | tail -n +2)
```

Or manually copy each issue template from the output and create issues via the GitHub web UI.
